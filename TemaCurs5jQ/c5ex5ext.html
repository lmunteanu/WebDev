<!DOCTYPE html>
<html>
<head>
    <title></title>
	<meta charset="utf-8" />
    <script src="jquery-2.1.4.js"></script>
</head>
<body>
    

    
    <p id="res"></p>
    <script>
        var mammalsCreated = 0;
        function Mammal(name) {

            this.name = name;

            this.offspring = [];

            this.babyNr = 0;

            this.wasHappy = 0;
            
            this.mId = ++mammalsCreated;

        }

        // original haveABaby
        //Mammal.prototype.haveABaby = function () {
        //    var newBaby = new Mammal("Baby " + this.name);
        //    this.offspring.push(newBaby);
        //    return newBaby;
        //}
        // upgraded haveABaby


        Mammal.prototype.haveABaby =  (function () {
                var counter = 0;
                return function () {
                    var newBaby = new Mammal("Baby " + this.name);
                    this.offspring.push(newBaby);
                    this.babyNr++;
                    return this.name + "'s " + newBaby + " of " + (counter += 1) + " created babies";
                }
            })();

        

        Mammal.prototype.toString = function () {

            return '[Mammalaaa "' + this.name + '"]';

        }

        Mammal.prototype.beHappy = function () {
            
            this.wasHappy++;

            return 'Mammal [' + this.name + ']' + " is the happiest mammal ever created";

        }

        
        var mamal1 = new Mammal("cici");
        var mamal2 = new Mammal("igor");
       

    </script>
</body>
</html>
